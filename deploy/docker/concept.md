# Docker

## 概念

### 作用

Docker 可以将应用以集装箱的方式进行打包，通过镜像的方式可以实现在不同的环境下进行快速部署，在团队中还可实现一次打包，多次共享，使用 Docker 可以轻松的为任何应用创建一个轻量级的、可移植的、自给自足的容器。

例如，我们在本地将编译测试通过的程序打包成镜像，可以快速的在服务器环境中进行部署，有时也能解决不同的开发环境造成的问题 “明明我本地是好的，但是一到服务器就不行”。

### 优点

- 高效的利用系统资源（节约成本）
- 持续交付与部署（敏捷）
- 多平台的迁移更容易（可移植性）
- 容易的沙箱机制（安全性）

### 使用场景

- Use Cases
- 简化配置
- 代码流水线（Code Pipeline）管理
- 提高开发效率
- 隔离应用
- 整合服务器
- 调试能力
- 多租户环境
- 快速部署

## 架构

中间部位为我们进行 Docker 操作的宿主机，其运行了一个 Docker daemon 的核心守护程序，负责构建、运行和分发 Docker 容器。

左边为 Docker 客户端，其与 Docker 守护进程进行通信，客户端会将 build、pull、run 命令发送到 Docker 守护进程进行执行。

右边为 Docler 注册表存储 Docker 镜像，是一个所有 Docker 用户共享 Docker 镜像的服务，Docker daemon 与之进行交互。

![Docker架构](../../snapshots/docker-architect.jpeg)

## 镜像与容器

参考 [Docker Overview](https://docs.docker.com/engine/docker-overview/)

**什么是 Docker 镜像**

Docker 会把应用程序及依赖打包进镜像（Images）里，提供了容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等），通过这个镜像文件可生成 Docker 容器。

例如：这个镜像文件包含了一个完整的 Ubuntu 系统，我们可以在 Ubuntu 镜像基础之上安装了 Redis、Mysql 等其它应用程序，可以回顾下 Docker 架构一瞥 在 DOCKER_HOST 里面有个 images。

另外在制作好镜像文件之后可以拷贝到其它机器使用，它是通用的，镜像的制作可以基于 Dockerfile 构建后面会讲解。

**什么是 Docker 容器**

容器是镜像的可运行实例，你可以使用 Docker API 创建、启动、停止、移动或删除它。

在默认情况下，容器与其它容器及其主机是隔离的，拥有自己的独立进程空间、网络配置。

容器由其镜像以及在创建或启动容器时提供的任何配置选项定义。当容器被删除时，对其状态的任何未存储在持久存储中的更改都会消失。

---

**参考资料：**

- [一文零基础教你学会 Docker 入门到实践](https://cnodejs.org/topic/5d8c0df7e86cfb0d2a645c61)
