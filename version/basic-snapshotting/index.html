<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/devops-guidebook/umi.css" />
    <script>
      window.routerBase = "/devops-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.9
    </script>
    <title>&#x57FA;&#x672C;&#x5FEB;&#x7167;</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/favicon.png&#x27;)" href="/devops-guidebook//">DevOps Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/devops-guidebook//linux">Linux</a><a href="/devops-guidebook//server">服务器</a><a href="/devops-guidebook//data-base">数据库</a><a href="/devops-guidebook//deploy">部署</a><a aria-current="page" class="active" href="/devops-guidebook//version">版本管理</a><a href="/devops-guidebook//devops">DevOps</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/devops-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/favicon.png&#x27;)" href="/devops-guidebook//"></a><h1>DevOps Guidebook</h1><p>DevOps 完全知识体系</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/devops-guidebook//linux">Linux</a></li><li><a href="/devops-guidebook//server">服务器</a></li><li><a href="/devops-guidebook//data-base">数据库</a></li><li><a href="/devops-guidebook//deploy">部署</a></li><li><a aria-current="page" class="active" href="/devops-guidebook//version">版本管理</a></li><li><a href="/devops-guidebook//devops">DevOps</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/devops-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/devops-guidebook//version/overview">概述</a></li><li><a href="/devops-guidebook//version/setup-and-config">设置和配置</a></li><li><a href="/devops-guidebook//version/getting-and-creating-projects">获取和创建项目</a></li><li><a aria-current="page" class="active" href="/devops-guidebook//version/basic-snapshotting">基本快照</a></li><li><a href="/devops-guidebook//version/branching-and-merging">分支与合并</a></li><li><a href="/devops-guidebook//version/sharing-and-updating-projects">共享和更新项目</a></li><li><a href="/devops-guidebook//version/inspection-and-comparison">检查和比较</a></li><li><a href="/devops-guidebook//version/patching">修补</a></li><li><a href="/devops-guidebook//version/commit-guide-standard">提交信息规范</a></li><li><a href="/devops-guidebook//version/extensions">扩展</a></li><li><a href="/devops-guidebook//version/q&amp;a">Q&amp;A</a></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="添加 git add" data-depth="2" class=""><a href="/devops-guidebook//version/basic-snapshotting#添加-git-add"><span>添加 git add</span></a></li><li title="添加修改记录至暂存区" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#添加修改记录至暂存区"><span>添加修改记录至暂存区</span></a></li><li title="分次添加修改至暂存区" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#分次添加修改至暂存区"><span>分次添加修改至暂存区</span></a></li><li title="添加跟踪修改至暂存区" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#添加跟踪修改至暂存区"><span>添加跟踪修改至暂存区</span></a></li><li title="添加修改到暂存区" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#添加修改到暂存区"><span>添加修改到暂存区</span></a></li><li title="状态 git status" data-depth="2" class=""><a href="/devops-guidebook//version/basic-snapshotting#状态-git-status"><span>状态 git status</span></a></li><li title="查看版本修改" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#查看版本修改"><span>查看版本修改</span></a></li><li title="查看忽略文件" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#查看忽略文件"><span>查看忽略文件</span></a></li><li title="提交 git commit" data-depth="2" class=""><a href="/devops-guidebook//version/basic-snapshotting#提交-git-commit"><span>提交 git commit</span></a></li><li title="提交至本地仓" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#提交至本地仓"><span>提交至本地仓</span></a></li><li title="提交跟踪文件" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#提交跟踪文件"><span>提交跟踪文件</span></a></li><li title="提交时查看文件修改详情" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#提交时查看文件修改详情"><span>提交时查看文件修改详情</span></a></li><li title="增补提交" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#增补提交"><span>增补提交</span></a></li><li title="修改提交者信息" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#修改提交者信息"><span>修改提交者信息</span></a></li><li title="初始化提交记录" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#初始化提交记录"><span>初始化提交记录</span></a></li><li title="撤销 git reset" data-depth="2" class=""><a href="/devops-guidebook//version/basic-snapshotting#撤销-git-reset"><span>撤销 git reset</span></a></li><li title="撤销暂存" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#撤销暂存"><span>撤销暂存</span></a></li><li title="撤销到某个提交版本" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#撤销到某个提交版本"><span>撤销到某个提交版本</span></a></li><li title="中断工作流程处理" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#中断工作流程处理"><span>中断工作流程处理</span></a></li><li title="删除 git rm" data-depth="2" class=""><a href="/devops-guidebook//version/basic-snapshotting#删除-git-rm"><span>删除 git rm</span></a></li><li title="删除物理文件" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#删除物理文件"><span>删除物理文件</span></a></li><li title="删除文件修改记录" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#删除文件修改记录"><span>删除文件修改记录</span></a></li><li title="移动和重命名 git mv" data-depth="2" class=""><a href="/devops-guidebook//version/basic-snapshotting#移动和重命名-git-mv"><span>移动和重命名 git mv</span></a></li><li title="重命名文件" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#重命名文件"><span>重命名文件</span></a></li><li title="移动文件" data-depth="3" class=""><a href="/devops-guidebook//version/basic-snapshotting#移动文件"><span>移动文件</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="基本快照"><a aria-hidden="true" href="#基本快照"><span class="icon icon-link"></span></a>基本快照</h1><h2 id="添加-git-add"><a aria-hidden="true" href="#添加-git-add"><span class="icon icon-link"></span></a>添加 git add</h2><blockquote><p>Add file contents to the index</p><p>将文件内容添加到索引</p></blockquote><p><code>git add</code> 命令将文件内容添加到<strong>索引库</strong>（将修改记录添加到暂存区）。也就是将要提交的文件的信息添加到索引库中。</p><h3 id="添加修改记录至暂存区"><a aria-hidden="true" href="#添加修改记录至暂存区"><span class="icon icon-link"></span></a>添加修改记录至暂存区</h3><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="# 文件
$ git add &lt;file1&gt; &lt;file2&gt; &lt;file3&gt; ...

# 目录
$ git add &lt;dir&gt;

# 所有目录文件(包括修过过的文件、新建的文件，但不包括删除的文件)
$ git add .
" data-status="copy"></button><div class="token-line"><span class="token comment"># 文件</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">add</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">file</span><span class="token operator file-descriptor important">1</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">file</span><span class="token operator file-descriptor important">2</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">file</span><span class="token operator file-descriptor important">3</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">..</span><span class="token plain">.</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 目录</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">add</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">dir</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 所有目录文件(包括修过过的文件、新建的文件，但不包括删除的文件)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">add</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>📍 <strong>示例：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="# 提交单个文件
$ git add index.html

# 提交 markdown 文件
$ git add *.md
" data-status="copy"></button><div class="token-line"><span class="token comment"># 提交单个文件</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">add</span><span class="token plain"> index.html</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 提交 markdown 文件</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">add</span><span class="token plain"> *.md</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="分次添加修改至暂存区"><a aria-hidden="true" href="#分次添加修改至暂存区"><span class="icon icon-link"></span></a>分次添加修改至暂存区</h3><p>添加每个变化前，都会要求确认。对于同一个文件的多处变化，可以实现分次提交。</p><p><code>-p</code> 参数相当于 <code>--patch</code>，表示多次提交。</p><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git add -p
$ git add --patch
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">add</span><span class="token plain"> -p</span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">add</span><span class="token plain"> --patch</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>📍 <strong>示例：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="# 将以Controller结尾的文件的所有修改添加到暂存区
$ git add *Controller

# 将所有以Hello开头的文件的修改添加到暂存区 例如:HelloWorld.txt,Hello.java,HelloGit.txt ...
$ git add Hello*

# 将以Hello开头后面只有一位的文件的修改提交到暂存区 例如:Hello1.txt,HelloA.java 如果是HelloGit.txt或者Hello.java是不会被添加的$ git add [file1] [file2] ...
$ git add Hello?
" data-status="copy"></button><div class="token-line"><span class="token comment"># 将以Controller结尾的文件的所有修改添加到暂存区</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">add</span><span class="token plain"> *Controller</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 将所有以Hello开头的文件的修改添加到暂存区 例如:HelloWorld.txt,Hello.java,HelloGit.txt ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">add</span><span class="token plain"> Hello*</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 将以Hello开头后面只有一位的文件的修改提交到暂存区 例如:Hello1.txt,HelloA.java 如果是HelloGit.txt或者Hello.java是不会被添加的$ git add [file1] [file2] ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">add</span><span class="token plain"> Hello?</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="添加跟踪修改至暂存区"><a aria-hidden="true" href="#添加跟踪修改至暂存区"><span class="icon icon-link"></span></a>添加跟踪修改至暂存区</h3><p>标记本地有改动（<strong>包括删除和修改，但不包括新建</strong>）的<strong>已经追踪</strong>的文件，并添加至暂存库。</p><p><code>-u</code> 即 <code>--update</code> 表示更新索引，使其具有与 <code>&lt;pathspec&gt;</code> 匹配的条目。</p><p>省略 <code>&lt;path&gt;</code> 表示  <code>.</code> ，即当前目录。</p><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git add -u [&lt;pathspec&gt;]
$ git add --update [&lt;pathspec&gt;]
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">add</span><span class="token plain"> -u </span><span class="token punctuation">[</span><span class="token operator">&lt;</span><span class="token plain">pathspec</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">add</span><span class="token plain"> --update </span><span class="token punctuation">[</span><span class="token operator">&lt;</span><span class="token plain">pathspec</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="添加修改到暂存区"><a aria-hidden="true" href="#添加修改到暂存区"><span class="icon icon-link"></span></a>添加修改到暂存区</h3><p>标记本地所有改动的文件（包括删除、修改和新建），并添加至暂存库。</p><p><code>-A</code> 即 <code>--all</code> 或 <code>--no-ignore-removal</code> 表示更新索引，不仅在工作树具有匹配 <code>&lt;pathspec&gt;</code> 的文件的位置，而且索引已经有条目的位置。</p><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git add -A
$ git add --all
$ git add --no-ignore-removal
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">add</span><span class="token plain"> -A</span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">add</span><span class="token plain"> --all</span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">add</span><span class="token plain"> --no-ignore-removal</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><code>git add -A</code> 相当于同时执行 <code>git add .</code> 和 <code>git add -u</code>。</p><h2 id="状态-git-status"><a aria-hidden="true" href="#状态-git-status"><span class="icon icon-link"></span></a>状态 git status</h2><blockquote><p>Show the working tree status</p><p>显示工作树的状态</p></blockquote><p>执行该命令会返回三部分信息：</p><ol><li>拟提交的变更：这是已经放入暂存区，准备 <code>commit</code> 提交的变更</li><li>未暂存的变更：这是工作目录和暂存区快照之间存在差异的文件列表</li><li>未跟踪的文件：这类文件是被版本管理忽略的文件</li></ol><p><code>git status</code> 不显示已经 <code>commit</code> 到项目历史中去的信息。看项目历史的信息要使用 <a href="/devops-guidebook//version/6_Inspection%26Comparison#%E6%97%A5%E5%BF%97-log"><code>git log</code></a>。</p><h3 id="查看版本修改"><a aria-hidden="true" href="#查看版本修改"><span class="icon icon-link"></span></a>查看版本修改</h3><p>在每次执行 <code>git commit</code> 之前先使用 <code>git status</code> 检查文件状态是一个很好的习惯，这样能防止你不小心提交了您不想提交的东西。</p><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git status
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> status</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="查看忽略文件"><a aria-hidden="true" href="#查看忽略文件"><span class="icon icon-link"></span></a>查看忽略文件</h3><p>可以查看添加到 <code>.gitignore</code> 的文件的状态信息。</p><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git status --ignored
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> status --ignored</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="提交-git-commit"><a aria-hidden="true" href="#提交-git-commit"><span class="icon icon-link"></span></a>提交 git commit</h2><blockquote><p>Record changes to the repository</p><p>记录对存储库的更改</p></blockquote><p><code>git commit</code> 命令用于将更改记录（提交）到存储库。将索引库的<strong>当前内容</strong>与<strong>描述更改的用户</strong>和<strong>日志消息</strong>一起存储在新的提交中。</p><p>如果您提交，然后立即发现错误，可以使用 <a href="#%E5%9B%9E%E6%BB%9A-git-reset">git reset</a> 命令恢复。</p><h3 id="提交至本地仓"><a aria-hidden="true" href="#提交至本地仓"><span class="icon icon-link"></span></a>提交至本地仓</h3><p><code>&lt;msg&gt;</code> 表示提交的版本描述，如果给出了多个 <code>-m</code> ，它们的值将作为单独的段落连接起来。</p><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git commit -m &lt;msg&gt;
$ git commit --message &lt;msg&gt;
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> commit -m </span><span class="token operator">&lt;</span><span class="token plain">msg</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> commit --message </span><span class="token operator">&lt;</span><span class="token plain">msg</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>📍 <strong>示例：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git commit -m &#x27;the commit messge&#x27;
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> commit -m </span><span class="token string">&#x27;the commit messge&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>如果你想将暂存区指定的文件修改提交到本地仓库区，你可以使用如下的命令。<code>&lt;file&gt;</code> 表示你要提交的文件路径，文件可以是多个。</p><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git commit &lt;file1&gt; &lt;file2&gt; ... -m &lt;message&gt;
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> commit </span><span class="token operator">&lt;</span><span class="token plain">file</span><span class="token operator file-descriptor important">1</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">file</span><span class="token operator file-descriptor important">2</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">..</span><span class="token plain">. -m </span><span class="token operator">&lt;</span><span class="token plain">message</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="提交跟踪文件"><a aria-hidden="true" href="#提交跟踪文件"><span class="icon icon-link"></span></a>提交跟踪文件</h3><p>如果你想将工作区所有自上一次提交 <code>commit</code> 之后的变化直接提交到仓库区，你可以使用如下命令，相当于省略了 <code>git add</code>。</p><p>对于还没有跟踪 <code>track</code> 的文件，还是需要执行 <code>git add &lt;file&gt;</code> 命令。</p><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git commit -a
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> commit -a</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="提交时查看文件修改详情"><a aria-hidden="true" href="#提交时查看文件修改详情"><span class="icon icon-link"></span></a>提交时查看文件修改详情</h3><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git commit -v
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> commit -v</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="增补提交"><a aria-hidden="true" href="#增补提交"><span class="icon icon-link"></span></a>增补提交</h3><p>如果你想重做上一次 <code>commit</code>，并包括指定文件的新变化，那么你可以使用如下命令。</p><p>增补提交，会使用与当前提交节点相同的父节点进行一次新的提交，旧的提交将会被取消。</p><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git commit -amend &lt;file1&gt; &lt;file2&gt;
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> commit -amend </span><span class="token operator">&lt;</span><span class="token plain">file</span><span class="token operator file-descriptor important">1</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">file</span><span class="token operator file-descriptor important">2</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>如果你想使用一次新的提交 <code>commit</code>，替代上一次提交，那么你可以使用如下命令。如果代码没有任何新变化，则用来改写上一次 <code>commit</code> 的提交信息。</p><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git commit -amend -m &lt;message&gt;
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> commit -amend -m </span><span class="token operator">&lt;</span><span class="token plain">message</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="修改提交者信息"><a aria-hidden="true" href="#修改提交者信息"><span class="icon icon-link"></span></a>修改提交者信息</h3><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git commit --amend --author=&lt;author&gt;
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> commit --amend --author</span><span class="token operator">=</span><span class="token operator">&lt;</span><span class="token plain">author</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>📍 <strong>示例：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git commit --amend --author=&#x27;tsejx &lt;tsejx@foxmail.com&gt;&#x27;
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> commit --amend --author</span><span class="token operator">=</span><span class="token string">&#x27;tsejx &lt;tsejx@foxmail.com&gt;&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="初始化提交记录"><a aria-hidden="true" href="#初始化提交记录"><span class="icon icon-link"></span></a>初始化提交记录</h3><blockquote><p>⚠️ <strong>慎重操作</strong></p></blockquote><p>也就是把所有的改动都重新放回工作区，并<strong>清空所有的<code>commit</code></strong>，这样就可以重新提交第一个 <code>commit</code> 了。</p><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git update-ref -d HEAD
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> update-ref -d HEAD</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="撤销-git-reset"><a aria-hidden="true" href="#撤销-git-reset"><span class="icon icon-link"></span></a>撤销 git reset</h2><blockquote><p>Reset current HEAD to the specified state</p><p>用于将当前 <code>HEAD</code> 复位到指定状态（一般用于撤消之前的一些操作）</p></blockquote><h3 id="撤销暂存"><a aria-hidden="true" href="#撤销暂存"><span class="icon icon-link"></span></a>撤销暂存</h3><p>相当于对 <code>git add</code> 命令的反向操作。</p><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="# 撤销暂存区的修改，重新放回工作区
$ git reset &lt;file-name&gt;

# 回退暂存区里的文件，还原为（HEAD commit 里面该文件的状态）
# 会撤销从上次提交之后的一些操作
$ git reset HEAD -- &lt;file-name&gt;

# 重置暂存区与工作区，与上一次提交保持一致
$ git reset --hard
" data-status="copy"></button><div class="token-line"><span class="token comment"># 撤销暂存区的修改，重新放回工作区</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> reset </span><span class="token operator">&lt;</span><span class="token plain">file-name</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 回退暂存区里的文件，还原为（HEAD commit 里面该文件的状态）</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 会撤销从上次提交之后的一些操作</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> reset HEAD -- </span><span class="token operator">&lt;</span><span class="token plain">file-name</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 重置暂存区与工作区，与上一次提交保持一致</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> reset --hard</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="撤销到某个提交版本"><a aria-hidden="true" href="#撤销到某个提交版本"><span class="icon icon-link"></span></a>撤销到某个提交版本</h3><p>和 <code>revert</code> 的区别：<code>reset</code> 命令会抹去某个提交记录 <code>commit id</code> 之后的所有提交 <code>commit</code>。</p><p>📍 <strong>示例：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="# 回滚当前分支的指针到指定提交版本，同时重置暂存区，但工作区不变（默认就是-mixed参数）
$ git reset &lt;commit-id&gt;

# 回滚至上个版本，它将重置HEAD到另外一个提交记录,并且重置暂存区以便和HEAD相匹配，但是也到此为止。工作区不会被更改。
$ git reset -mixed HEAD^

# 回退至三个版本之前，只回退了提交的信息，暂存区和工作区与回退之前保持一致。如果还要提交，直接commit即可。
$ git reset -soft HEAD~3

# 回退到指定的提交版本，暂存区和工作区也会与变为指定提交版本一致
$ git reset --hard &lt;commit-id&gt;

# 回退到指定提交版本，但保持暂存区和工作区不变
$ git reset --keep &lt;commit-id&gt;
" data-status="copy"></button><div class="token-line"><span class="token comment"># 回滚当前分支的指针到指定提交版本，同时重置暂存区，但工作区不变（默认就是-mixed参数）</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> reset </span><span class="token operator">&lt;</span><span class="token plain">commit-id</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 回滚至上个版本，它将重置HEAD到另外一个提交记录,并且重置暂存区以便和HEAD相匹配，但是也到此为止。工作区不会被更改。</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> reset -mixed HEAD^</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 回退至三个版本之前，只回退了提交的信息，暂存区和工作区与回退之前保持一致。如果还要提交，直接commit即可。</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> reset -soft HEAD~3</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 回退到指定的提交版本，暂存区和工作区也会与变为指定提交版本一致</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> reset --hard </span><span class="token operator">&lt;</span><span class="token plain">commit-id</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 回退到指定提交版本，但保持暂存区和工作区不变</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> reset --keep </span><span class="token operator">&lt;</span><span class="token plain">commit-id</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="中断工作流程处理"><a aria-hidden="true" href="#中断工作流程处理"><span class="icon icon-link"></span></a>中断工作流程处理</h3><p>在实际开发中经常出现这样的情形：你正在开发一个大的新功能（工作在分支：<code>feature</code> 中），此时来了一个紧急的 BUG 需要修复，但是目前在工作区中的内容还没有成型，还不足以提交，但是又必须切换的另外的分支去修改 BUG。</p><p>📍 <strong>示例：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="# you were working in &#x27;feature&#x27; branch
$ git checkout feature

# develop new feature
$ git commit -a -m &quot;snapshot WIP&quot;                       # (1)
$ git checkout master

# fix bug
$ git commit                # commit with real log

$ git checkout feature
$ git reset --soft HEAD^    # go back to WIP state      # (2)
$ git reset                                             # (3)
" data-status="copy"></button><div class="token-line"><span class="token comment"># you were working in &#x27;feature&#x27; branch</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> checkout feature</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># develop new feature</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> commit -a -m </span><span class="token string">&quot;snapshot WIP&quot;</span><span class="token plain">                       </span><span class="token comment"># (1)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> checkout master</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># fix bug</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> commit                </span><span class="token comment"># commit with real log</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> checkout feature</span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> reset --soft HEAD^    </span><span class="token comment"># go back to WIP state      # (2)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> reset                                             </span><span class="token comment"># (3)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><ol><li>这次属于临时提交，因此随便添加一个临时注释即可</li><li>这次 <code>reset</code> 删除了 <code>WIP commit</code>，并且把工作区设置成提交 WIP 快照之前的状态。</li><li>此时，在索引中依然遗留着“snapshot WIP”提交时所做的未提交变化，<code>git reset</code> 将会清理索引成为尚未提交”<em>snapshot WIP</em>“时的状态便于接下来继续工作。</li></ol><h2 id="删除-git-rm"><a aria-hidden="true" href="#删除-git-rm"><span class="icon icon-link"></span></a>删除 git rm</h2><blockquote><p>Remove files from the working tree and from the index</p><p>用于从工作区和索引中删除文件</p></blockquote><h3 id="删除物理文件"><a aria-hidden="true" href="#删除物理文件"><span class="icon icon-link"></span></a>删除物理文件</h3><p>当我们需要删除暂存区或分支上的文件，同时工作区也不需要这个文件了。</p><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git rm &lt;file1&gt; &lt;file2&gt; ...
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">rm</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">file</span><span class="token operator file-descriptor important">1</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">file</span><span class="token operator file-descriptor important">2</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">..</span><span class="token plain">.</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="删除文件修改记录"><a aria-hidden="true" href="#删除文件修改记录"><span class="icon icon-link"></span></a>删除文件修改记录</h3><p>当我们需要删除<strong>暂存区或分支</strong>上的文件，但本地又需要使用，只是不希望这个文件被版本库控制。</p><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git rm --cached &lt;file&gt;
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">rm</span><span class="token plain"> --cached </span><span class="token operator">&lt;</span><span class="token plain">file</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="移动和重命名-git-mv"><a aria-hidden="true" href="#移动和重命名-git-mv"><span class="icon icon-link"></span></a>移动和重命名 git mv</h2><blockquote><p>Move or rename a file, a directory, or a symlin</p><p>用于移动或重命名文件，目录或符号链接。</p></blockquote><h3 id="重命名文件"><a aria-hidden="true" href="#重命名文件"><span class="icon icon-link"></span></a>重命名文件</h3><p>如果你想重命名文件，并且将这个改名放入暂存区。<code>source</code> 必须存在，并且是文件，符号链接或目录。<code>destination</code> 为重命名后的名称。</p><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git mv &lt;source /&gt; &lt;destination&gt;
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">mv</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">source /</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">destination</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="移动文件"><a aria-hidden="true" href="#移动文件"><span class="icon icon-link"></span></a>移动文件</h3><p>移动 <code>&lt;source&gt;</code> 到 <code>&lt;destination directory&gt;</code> 。最后一个参数必须是目标目录。</p><p>索引在成功完成后更新，但仍必须提交更改。</p><p>📖 <strong>语法：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="$ git mv &lt;source /&gt; ... &lt;destination directory&gt;
" data-status="copy"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">git</span><span class="token plain"> </span><span class="token function">mv</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">source /</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">..</span><span class="token plain">. </span><span class="token operator">&lt;</span><span class="token plain">destination directory</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/devops-guidebook/edit/master/docs/version/basic-snapshotting.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">7/11/2020, 7:44:42 AM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/devops-guidebook/umi.js"></script>
    <script src="/devops-guidebook/docs__version__basic-snapshotting.md.js"></script>
  </body>
</html>
